"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PreparedTransaction = void 0;
const tslib_1 = require("tslib");
const transactions_1 = require("../common/transactions");
class PreparedTransaction {
    constructor(connection, data, signer, logger, onSubmit) {
        this.connection = connection;
        this.data = data;
        this.signer = signer;
        this.logger = logger;
        this.onSubmit = onSubmit;
        this.submit = (commitment) => tslib_1.__awaiter(this, void 0, void 0, function* () {
            var _a;
            const res = yield (0, transactions_1.sendTransactionWithRetry)(this.connection, this.signer, this.data.instructions, this.data.signers, commitment, this.logger);
            (_a = this.onSubmit) === null || _a === void 0 ? void 0 : _a.call(this, res);
            return Object.assign(Object.assign({}, res), { orderId: this.data.orderId });
        });
    }
}
exports.PreparedTransaction = PreparedTransaction;
