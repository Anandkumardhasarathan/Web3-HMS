import { withPrefix } from "../prefix";
var REGEXP_IMPORT = /(\s*import\s*)([\w\d]+)(\s+from\s*)([\w\d".\\/]+)/g;
export var replaceImportAddresses = function (code, addressMap, byName) {
    if (byName === void 0) { byName = true; }
    var topShotFeeAddress = addressMap.TopShotFee;
    var addTopShowFee = code.replace(/0xTOPSHOTFEE/g, topShotFeeAddress);
    return addTopShowFee.replace(REGEXP_IMPORT, function (__, imp, contract, _, address) {
        var key = byName ? contract : address;
        var nextAddress = addressMap instanceof Function ? addressMap(key) : addressMap[key];
        var addressWithPrefix = withPrefix(nextAddress);
        if (!addressWithPrefix) {
            throw new Error("Invalid contract address for injecting in transaction");
        }
        return "".concat(imp).concat(contract, " from ").concat(addressWithPrefix);
    });
};
export function fillCodeTemplate(code, map) {
    var resultCode = code;
    Object.keys(map).forEach(function (key) {
        resultCode = resultCode.replace(new RegExp(key, "g"), map[key]);
    });
    return resultCode;
}
