"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getStringifiedData = void 0;
function getStringifiedData(data) {
    try {
        if (typeof data === "string") {
            return data;
        }
        const errorObject = Object.getOwnPropertyNames(data).reduce((acc, key) => {
            acc[key] = data[key];
            return acc;
        }, {});
        return JSON.stringify(errorObject, getErrorsReplacer(), "  ");
    }
    catch (e) {
        return undefined;
    }
}
exports.getStringifiedData = getStringifiedData;
function getErrorsReplacer() {
    const objectCache = new WeakSet();
    return (key, value) => {
        try {
            if (typeof value === "object" && value !== null) {
                if (objectCache.has(value)) {
                    return;
                }
                objectCache.add(value);
            }
            if (value instanceof Error) {
                const error = {};
                Object.getOwnPropertyNames(value).forEach(function (propName) {
                    // @ts-ignore
                    error[propName] = value[propName];
                });
                return error;
            }
        }
        catch (_) { }
        return value;
    };
}
