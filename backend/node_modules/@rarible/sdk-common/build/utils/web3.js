"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isWeb3v4 = exports.getWeb3Version = exports.isWeb3v1 = void 0;
const types_1 = require("./types");
function getWeb3v1Version(x) {
    if (!(0, types_1.hasVersion)(x))
        return undefined;
    return x.version;
}
function isWeb3v1(web3Instance) {
    const version = getWeb3v1Version(web3Instance);
    if (!version)
        return false;
    return (0, types_1.getMajorVersion)(version) === "1";
}
exports.isWeb3v1 = isWeb3v1;
function hasVersionFnField(fn) {
    return "version" in fn;
}
function getWeb3Version(web3Instance) {
    if (!((0, types_1.isObjectLike)(web3Instance) && (web3Instance === null || web3Instance === void 0 ? void 0 : web3Instance.constructor) && hasVersionFnField(web3Instance.constructor))) {
        return undefined;
    }
    return web3Instance.constructor.version;
}
exports.getWeb3Version = getWeb3Version;
function isWeb3v4(web3Instance) {
    const version = getWeb3Version(web3Instance);
    if (!version)
        return false;
    return (0, types_1.getMajorVersion)(version) === "4";
}
exports.isWeb3v4 = isWeb3v4;
