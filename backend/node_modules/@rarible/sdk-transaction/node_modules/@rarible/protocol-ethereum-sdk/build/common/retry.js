"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.wrapInRetry = exports.delay = exports.retry = void 0;
const sdk_common_1 = require("@rarible/sdk-common");
function retry(num, del, thunk) {
    return thunk().catch(error => {
        if (num === 0) {
            throw error;
        }
        return delay(del).then(() => retry(num - 1, del, thunk));
    });
}
exports.retry = retry;
function delay(num) {
    return new Promise(r => setTimeout(r, num));
}
exports.delay = delay;
function wrapInRetry(thunk) {
    return (0, sdk_common_1.conditionalRetry)(5, 3000, thunk, error => (error === null || error === void 0 ? void 0 : error.message) === sdk_common_1.FAILED_TO_FETCH_ERROR);
}
exports.wrapInRetry = wrapInRetry;
