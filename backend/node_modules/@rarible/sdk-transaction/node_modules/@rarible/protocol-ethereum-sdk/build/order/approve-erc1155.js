"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.approveErc1155 = void 0;
const tslib_1 = require("tslib");
const erc1155_1 = require("./contracts/erc1155");
function approveErc1155(ethereum, send, contract, owner, operator) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        if (!ethereum) {
            throw new Error("Wallet undefined");
        }
        const erc1155 = (0, erc1155_1.createErc1155Contract)(ethereum, contract);
        let allowance;
        try {
            allowance = yield erc1155.functionCall("isApprovedForAll", owner, operator).call();
        }
        catch (e) {
            allowance = false;
        }
        if (!allowance) {
            return send(erc1155.functionCall("setApprovalForAll", operator, true));
        }
        return undefined;
    });
}
exports.approveErc1155 = approveErc1155;
