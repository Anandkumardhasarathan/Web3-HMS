"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.approveErc721 = void 0;
const tslib_1 = require("tslib");
const erc721_1 = require("./contracts/erc721");
function approveErc721(ethereum, send, contract, owner, operator) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        if (!ethereum) {
            throw new Error("Wallet undefined");
        }
        const erc721 = (0, erc721_1.createErc721Contract)(ethereum, contract);
        let allowance;
        try {
            allowance = yield erc721.functionCall("isApprovedForAll", owner, operator).call();
        }
        catch (e) {
            allowance = false;
        }
        if (!allowance) {
            return yield send(erc721.functionCall("setApprovalForAll", operator, true));
        }
        return undefined;
    });
}
exports.approveErc721 = approveErc721;
