"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAuctionHouseFee = exports.getAuctionHouse = void 0;
const tslib_1 = require("tslib");
const solana_common_1 = require("@rarible/solana-common");
const address_converters_1 = require("./address-converters");
const auctionHouseFee = {
    raria47jXd4tdW6Dj7T64mgahwTjMsVaDwFxMHt9Jbp: 0, // base points (250 = 2.5%)
};
function getAuctionHouse(currency, auctionHouseMapping) {
    if (currency["@type"] === "SOLANA_SOL") {
        if (auctionHouseMapping && auctionHouseMapping["SOLANA_SOL"]) {
            return (0, solana_common_1.toPublicKey)(auctionHouseMapping["SOLANA_SOL"].address);
        }
        return (0, solana_common_1.toPublicKey)("raria47jXd4tdW6Dj7T64mgahwTjMsVaDwFxMHt9Jbp");
    }
    else if (currency["@type"] === "SOLANA_NFT") {
        const mintAddress = (0, address_converters_1.extractAddress)(currency.itemId);
        if (auctionHouseMapping && auctionHouseMapping[mintAddress]) {
            return (0, solana_common_1.toPublicKey)(auctionHouseMapping[mintAddress].address);
        }
    }
    throw new Error("Auction House for specified currency not found");
}
exports.getAuctionHouse = getAuctionHouse;
function getAuctionHouseFee(ah, auctionHouseMapping) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const ahAddress = ah.toString();
        if (auctionHouseMapping) {
            const ahRecord = Object.values(auctionHouseMapping).find(record => record.address === ahAddress);
            if (ahRecord) {
                return ahRecord.baseFee;
            }
        }
        if (auctionHouseFee[ahAddress] === undefined) {
            throw new Error("No fee info found for specified Auction House");
        }
        return auctionHouseFee[ahAddress];
    });
}
exports.getAuctionHouseFee = getAuctionHouseFee;
