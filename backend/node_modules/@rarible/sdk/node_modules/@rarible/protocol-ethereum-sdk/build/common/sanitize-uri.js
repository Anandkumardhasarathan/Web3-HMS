"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.sanitizeUri = void 0;
function sanitizeUri(contractPrefix, uriRaw) {
    const fixedContractPrefix = fixContractPrefix(contractPrefix);
    if (!uriRaw) {
        throw new Error("uri is not defined");
    }
    if (!uriRaw.startsWith(fixedContractPrefix)) {
        throw new Error(`uri must start with: ${fixedContractPrefix}`);
    }
    return uriRaw.slice(fixedContractPrefix.length) || "";
}
exports.sanitizeUri = sanitizeUri;
/**
 * Workaround for older contracts where contract uri is set to http link
 */
function fixContractPrefix(contractPrefix) {
    return contractPrefix.replace("https://ipfs.daonomic.com", "ipfs:/").replace("https://ipfs.rarible.com", "ipfs:/");
}
