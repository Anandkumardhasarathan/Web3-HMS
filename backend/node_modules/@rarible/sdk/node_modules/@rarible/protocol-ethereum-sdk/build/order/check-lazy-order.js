"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.checkLazyOrder = void 0;
const tslib_1 = require("tslib");
function checkLazyOrder(checkLazyAsset, form) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const make = yield checkLazyMakeAsset(checkLazyAsset, form.make, form.maker);
        const take = yield checkLazyAsset(form.take);
        return Object.assign(Object.assign({}, form), { make,
            take });
    });
}
exports.checkLazyOrder = checkLazyOrder;
function checkLazyMakeAsset(checkLazyAsset, asset, maker) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const make = yield checkLazyAsset(asset);
        if (isLazyAsset(make.assetType) && make.assetType.creators[0].account === maker) {
            return make;
        }
        return asset;
    });
}
function isLazyAsset(x) {
    return x.assetClass === "ERC1155_LAZY" || x.assetClass === "ERC721_LAZY";
}
